let e=null,t=null;function o(o,r={}){if(!o||!o.trim())return;e&&(null!==t&&clearTimeout(t),e.parentNode&&e.parentNode.removeChild(e),e=null);document.querySelectorAll(".model-message-container").forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)});const n=document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches,a=document.createElement("div");a.className="model-message-container";const s=document.createElement("div");s.className="model-message",s.textContent=o;const l=document.createElement("div");l.className="model-message-arrow",Object.assign(a.style,{position:"fixed",zIndex:"1001",pointerEvents:"none",opacity:"0",transform:"translateY(15px) translateX(-50%) scale(0.9)",transition:"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"});const i={position:"relative",background:n?"linear-gradient(135deg, rgba(45, 55, 72, 0.95), rgba(26, 32, 44, 0.9))":"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(240, 248, 255, 0.9))",color:n?"#e2e8f0":"#2c3e50",padding:"12px 16px",borderRadius:"16px",fontSize:"14px",fontWeight:"500",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',maxWidth:"240px",minWidth:"100px",wordWrap:"break-word",textAlign:"center",whiteSpace:"pre-wrap",boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2)":"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08)",border:n?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.6)",backdropFilter:"blur(12px)",letterSpacing:"0.3px",lineHeight:"1.4"};Object.assign(s.style,i),Object.assign(l.style,{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:n?"8px solid rgba(45, 55, 72, 0.95)":"8px solid rgba(255, 255, 255, 0.95)",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}),s.appendChild(l),a.appendChild(s),document.body.appendChild(a),e=a;const d=document.getElementById(r.containerId||"model-container");if(d){const e=d.getBoundingClientRect(),t=e.left+e.width/2,o=240,s=60,i=10;let c=t;var p=r.messageOffsetY||0;let m=e.top+p-s-25;const g=i+o/2,b=window.innerWidth-i-o/2;c<g?c=g:c>b&&(c=b);const x=i,h=window.innerHeight-s-i;m<x?(m=e.bottom+25,l.style.top="0",l.style.bottom="auto",l.style.borderTop="none",l.style.borderBottom=n?"8px solid rgba(45, 55, 72, 0.95)":"8px solid rgba(255, 255, 255, 0.95)"):m>h&&(m=h),a.style.left=c+"px",a.style.top=m+"px",setTimeout(()=>{const o=a.getBoundingClientRect(),r=o.width,s=o.height;let d=t;const c=i+r/2,m=window.innerWidth-i-r/2;d<c?d=c:d>m&&(d=m);let g=e.top+p-s-25;const b=i,x=window.innerHeight-s-i;let h=!0;g<b?(g=e.bottom+25,h=!1):g>x&&(g=x);const u=e.left+e.width/2-d,f=r/2-20,w=Math.max(-f,Math.min(f,u));h?Object.assign(l.style,{position:"absolute",top:"100%",left:"50%",bottom:"auto",transform:`translateX(calc(-50% + ${w}px))`,width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:n?"8px solid rgba(45, 55, 72, 0.95)":"8px solid rgba(255, 255, 255, 0.95)",borderBottom:"none",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}):Object.assign(l.style,{position:"absolute",top:"0",left:"50%",bottom:"auto",transform:`translateX(calc(-50% + ${w}px))`,width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"none",borderBottom:n?"8px solid rgba(45, 55, 72, 0.95)":"8px solid rgba(255, 255, 255, 0.95)",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}),a.style.left=d+"px",a.style.top=g+"px"},50)}setTimeout(()=>{a.style.opacity="1",a.style.transform="translateY(0) translateX(-50%) scale(1)"},100);const c=r.displayTime||3e3;t=window.setTimeout(()=>{a.style.opacity="0",a.style.transform="translateY(-15px) translateX(-50%) scale(0.95)",setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a),e===a&&(e=null)},400)},c)}function r(){e&&(null!==t&&clearTimeout(t),e.parentNode&&e.parentNode.removeChild(e),e=null);document.querySelectorAll(".model-message-container").forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}window.showModelMessage=o,window.clearModelMessage=r;export{r as clearMessage,o as showMessage};
